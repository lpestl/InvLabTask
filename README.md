# InvLabTask

Test task for Invention Laboratory LLC.

## Message from customer

### Название задачи: 

Разработка системы обработки XML-файлов на основе микросервисной архитектуры (C#, RabbitMQ, SQLite) 

#### Описание задачи: 

Требуется разработать систему для обработки XML-файлов [на основании предоставленного образца](Task/status.xml), состоящую из двух взаимодействующих сервисов на .NET, использующих RabbitMQ для обмена сообщениями. 
 
### Требования к системе 

1. Сервис `FileParserService` 

* Функционал: 
   * Мониторинг и чтение XML-файлов с диска с интервалом **1 раз в секунду**. 
   * Парсинг XML с сериализацией данных в структурированный формат. 
   * Случайное изменение свойства `ModuleState` для каждого модуля (значения: `Online`,`Run`, `NotReady`, `Offline`). 
   * Преобразование данных в JSON-формат (со всеми модулями и обновленными состояниями). 
   * Отправка JSON в сервис `DataProcessorService` через RabbitMQ. 


2. Сервис `DataProcessorService` 

* Функционал: 
   * Прием сообщений из RabbitMQ. 
   * Сохранение полей `ModuleCategoryID` и `ModuleState` в базу данных SQLite. 
   * Обновление `ModuleState` при существующем `ModuleCategoryID`. 

3. RabbitMQ 

* Используется как брокер сообщений для связи между сервисами. 
* Важно: Настройки подключения (хост, порт, учетные данные) должны быть конфигурируемыми без изменения кода. 

4. Многопоточность 

* Обработка каждого файла в отдельном потоке для оптимизации производительности. 

5. Дополнительные требования 

* Логирование: Запись ключевых событий (чтение файлов, ошибки, обновления БД). 
* Обработка ошибок: Корректное управление исключениями (невалидные файлы, недоступность RabbitMQ/БД). 
 
### Технологии и инструменты 

* Язык: C# (.NET 6+) 
* База данных: SQLite (встроенная файловая БД) 
* Очереди сообщений: RabbitMQ 
* Сериализация: `System.Text.Json` / `XmlSerializer` 
 
### Требуемые результаты 

1. Исходный код: 
* Репозиторий на GitHub или архив с проектами: 
 `FileParserService` § `DataProcessorService` 
* Общие библиотеки (если есть). 
2. База данных: 
* Файл SQLite. 
3. Документация: 
* README с инструкциями: 
   * Установка и запуск сервисов. 
   * Настройка подключения к RabbitMQ. 
   * Создание и инициализация БД SQLite. 

